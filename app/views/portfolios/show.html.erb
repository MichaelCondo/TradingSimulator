<html>

  <body style="background-color:black; color: white; margin-left: 16%;">
    <h1 style="margin-bottom: 3%">Portfolio</h1>

      <h3>Balance</h3>
      <table class="table" style="background-color:#0CBE86; color:#FFFFFF;">
        <thead>
          <tr>
            <th scope="col">Investment Value</th>
            <th scope="col">Book Cost</th>
            <th scope="col">Cash</th>
            <th scope="col">Portfolio Value</th>
            <th scope="col">Gain/Loss</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><%= format_to_currency(@current_user.portfolio.investment_value) %></td>
            <td><%= format_to_currency(@current_user.portfolio.book_cost) %></td>
            <td><%= format_to_currency(@current_user.portfolio.cash) %></td>
            <td><%= format_to_currency(@current_user.portfolio.portfolio_value) %></td>
            <td><%= format_to_currency(@current_user.portfolio.gain_loss) %></td>
          </tr>
        </tbody>
      </table>

      <% if @has_stocks %>
        <h3 style="margin-top: 5%;">Holdings</h3>
        <table class="table" style="background-color:#0CBE86; color:#FFFFFF;">
          <thead>
            <tr>
              <th scope="col">Ticker</th>
              <th scope="col">Company Name</th>
              <th scope="col">Stock Exchange</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
              <th scope="col">Market Value</th>
              <th scope="col">Book Cost</th>
              <th scope="col">Gain/Loss</th>
              <th scope="col">Dividend Yield</th>
            </tr>
          </thead>
          <tbody>
            <% @current_user.portfolio.portfolio_stocks.each do |stock| %>
              <tr>
                <td><%= stock.ticker %></td>
                <td><%= stock.name %></td>
                <td><%= stock.exchange %></td>
                <td><%= stock.quantity %></td>
                <td><%= format_to_currency(stock.current_price) %></td>
                <td><%= format_to_currency(stock.market_value) %></td>
                <td><%= format_to_currency(stock.book_cost) %></td>
                <td><%= format_to_currency(stock.gain_loss) %></td>
                <td><%= ((stock.dividend_yield).round(2).to_s) + "%" %></td>
              </tr>
            <% end; nil %>
          </tbody>
        </table>
      <% end %>
  </body>

</html>
